https://192.168.225.50/ui/
Ansible@vmtraining.local
Ansible!09_20$24!


sa / pass

https://www.perplexity.ai/


машина тренера:
DNS Name:	ws.lab.example.com
IP Addresses:	172.16.195.142

мой сервер управления
DNS Name:	ws.lab.example.com
IP Addresses:	172.16.195.155

serverA
DNS Name:	servera.lab.example.com
IP Addresses:	172.16.195.163




#Ansible день 1


Инвентори по умолчанию лежит
/etc/ansible/hosts



Настройка Ansible
/etc/ansible/ansible.cfg`-низкий приоритет
~/.ansible.cfg - средний приоритет
./ansible.cfg - высокий приоритет





Плагины для VSCode для удаленного подключения:
Remote -ssh
Remote Explorer
Remote tunels

список управляемых хостов
ansible all -i inventory.cfg --list-hosts

пинг всех хостов
ansible all -m ping

Выполнить неидемпотентую команду(BAD)
ansible all -m command -a /usr/bin/hostname -o

Идемпотентные коанды через модули -m :
ansible all -m command -a 'id'
ansible all -m copy  -a 'content="This server is managed by Ansible.\n" dest=/etc/motd' --become
ansible all -m command -a 'cat /etc/motd'
ansible -m user -a 'name=newbie uid=4000 state=present' -b


#Ansible день 2

Проверка синтаксиса плейбука
ansible-playbook --syntax-check webserver.yml

Проверка выполнения(сухой прогон)
ansible-playbook -C webserver.yml


Просмотр документации по модулям
ansible-doc -l #список модулей
ansible-doc user #инфа по конкретному модулю
ansible-doc -s yum #инфа по конкретному модулю сокращенно

Расположение модулей bultin
/usr/lib/python3.9/site-packages/ansible/modules/


## Модуль 4 Переменные

!!нельзя называть пременные как имя модуля

приоритет перменных:
https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_variables.html#where-to-set-variables


Если переменная указана в начале ключа, тоее нужно помещать в кавычки

- name: Creates the user {{ user }}
  user:  
    name: "{{ users }}"

Переменные в плейбук можно определеить прямо или через файл:

- hosts: all
  vars:
    users: joe

- hosts: all
  vars_files:
    - vars/users.yml
